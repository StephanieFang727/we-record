<!--pages/todos.wxml-->
<view class="page">
 <view class="container">
  <view class="todo_date">
    <picker mode="date" value="{{date}}" start="2015-09-01" end="2025-09-01" bindchange="bindDateChange">
    <view class="picker">
    {{date}}
    </view>
  </picker>
  </view>
  <view class="todo_title">
    <view class="status">
      <text class="{{status === '1'?'active':''}}" data-status="1" bindtap="switchStatus">全部</text>
      <text class="{{status === '2'?'active':''}}" data-status="2" bindtap="switchStatus">未完成</text>
      <text class="{{status === '3'?'active':''}}" data-status="3" bindtap="switchStatus">已完成</text>
    </view>
    <view class='todo_add'>
      <button class="add-btn btn" type="primary" size="mini" bindtap="bindAddTap">
        添加
      </button>
    </view>
  </view>
  <view class="todo_list" wx:for="{{curList}}" wx:key="id">
    <view class="todo_item">
      <view class="todo_item-content"
      bindtap="bindTodoTap" 
      bindlongpress="bindTodoLongPress"
      bindtouchstart="touchS" 
      bindtouchmove="touchM" 
      bindtouchend="touchE"
      data-id="{{item.id}}"
      style="{{item.itemStyle}}"
      >
        <icon type="{{item.completed ? 'success' :'circle' }}"></icon>
        <text class="item-name">{{item.name}}</text>
      </view>
      <view class="todo-btn_group">
        <view class='todo-btn_item todo_edit-btn' bindtap="bindEditTap">
          <icon class="iconfont icon-bianji"></icon>
        </view>
        <view class='todo-btn_item todo_urgent-btn' bindtap="bindEditTap">
          <icon class="iconfont icon-shoucang"></icon>
        </view>
      </view>
    </view> 
  </view>
  <view class='todoForm-box' style="display: {{isFormShow ? 'block': 'none'}}">
    <form class='todoForm' catchsubmit="formSubmit" catchreset="formReset">
      <view class="weui-cell weui-cell_input">
        <input 
        class="weui-input"
        auto-focus 
        placeholder="输入任务"
        value="{{value}}"
        name="name"
        />
      </view>
      <view class="weui-cell">
        <text>是否紧急</text>
        <switch 
        checked="{{value}}"
        name="isUrgent"
        color="#FAED26"/>
      </view>
      <view class="todoForm-btn_group">
        <button 
        class="todoForm-add_btn btn" 
        type="primary" 
        size="mini"
        formType="submit"
        >
        确定
      </button>
        <button 
        class="todoForm-cancel_btn btn cancel_btn" 
        type="default" 
        bindtap="hideForm" 
        size="mini"
        form-type='reset'
        >
        取消
      </button>
      </view>
    </form>
  </view>
 </view>
</view>
